<div class="p-6 bg-slate-900 min-h-screen">
  <h1 class="text-3xl font-bold text-white mb-6">üìú Biblioteca de Decretos</h1>
  
  <div class="bg-slate-800 rounded-lg shadow-lg p-6 mb-6 border border-slate-700">
    <div class="mb-4">
      <h2 class="text-xl font-bold text-white mb-4">Lista de Decretos</h2>
      <p class="text-slate-400 text-sm mb-4">Gestiona los decretos que se mostrar√°n a los alumnos durante las pr√°cticas.</p>
    </div>
    
    <div class="mb-4 flex gap-2 flex-wrap">
      <a href="/admin/decretos/editar/nuevo" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded transition-colors">
        ‚ûï Nuevo decreto
      </a>
      <button onclick="sincronizarDecretos()" class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded transition-colors">
        üîÑ Sincronizar con Drive + ClickUp
      </button>
    </div>
    
    <!-- B√∫squeda -->
    <div class="mb-4">
      <input 
        type="text" 
        id="busquedaDecretos" 
        placeholder="üîç Buscar por nombre..." 
        class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"
        onkeyup="filtrarDecretos()"
      >
    </div>
    
    <div class="overflow-x-auto">
      <table class="w-full text-left">
        <thead>
          <tr class="border-b border-slate-700">
            <th class="pb-3 px-4 text-slate-300 font-semibold">Nombre</th>
            <th class="pb-3 px-4 text-slate-300 font-semibold">Nivel m√≠nimo</th>
            <th class="pb-3 px-4 text-slate-300 font-semibold">Posici√≥n</th>
            <th class="pb-3 px-4 text-slate-300 font-semibold">Obligatoria</th>
            <th class="pb-3 px-4 text-slate-300 font-semibold">Activo</th>
            <th class="pb-3 px-4 text-slate-300 font-semibold">Acciones</th>
          </tr>
        </thead>
        <tbody id="tablaDecretos">
          {{DECRETOS_ROWS}}
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Modal de Preview R√°pido -->
<div id="modalPreviewRapido" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
  <div class="bg-slate-800 rounded-lg shadow-xl p-6 max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-2xl font-bold text-white" id="previewTitulo">Vista Previa</h2>
      <button 
        onclick="cerrarPreviewRapido()" 
        class="text-slate-400 hover:text-white text-2xl"
      >
        √ó
      </button>
    </div>
    <div id="previewRapidoContent" class="prose prose-invert max-w-none text-white">
      <!-- Contenido de preview se inyectar√° aqu√≠ -->
    </div>
    <div class="mt-4 flex justify-end">
      <button 
        onclick="cerrarPreviewRapido()" 
        class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded"
      >
        Cerrar
      </button>
    </div>
  </div>
</div>

<script src="/js/admin-decretos.js"></script>
<script>
// Funci√≥n para filtrar decretos por b√∫squeda
function filtrarDecretos() {
  const busqueda = document.getElementById('busquedaDecretos').value.toLowerCase();
  const filas = document.querySelectorAll('#tablaDecretos tr');
  
  filas.forEach(fila => {
    const texto = fila.textContent.toLowerCase();
    if (texto.includes(busqueda)) {
      fila.style.display = '';
    } else {
      fila.style.display = 'none';
    }
  });
}

// Funci√≥n para mostrar preview r√°pido
function mostrarPreviewRapido(decretoId, nombre, contenidoHtml) {
  const modal = document.getElementById('modalPreviewRapido');
  const titulo = document.getElementById('previewTitulo');
  const content = document.getElementById('previewRapidoContent');
  
  titulo.textContent = nombre || 'Vista Previa';
  content.innerHTML = contenidoHtml || '<p class="text-slate-400">No hay contenido disponible.</p>';
  
  modal.classList.remove('hidden');
}

// Funci√≥n para cerrar preview r√°pido
function cerrarPreviewRapido() {
  const modal = document.getElementById('modalPreviewRapido');
  modal.classList.add('hidden');
}

// Cerrar modal con ESC
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    cerrarPreviewRapido();
  }
});
</script>
















